<nb-card fixed>
    <nb-card-header>
        <nav class="fixed">
            <ngx-header-titulo [objTitulo]="objetoTitulo"></ngx-header-titulo>
        </nav>
    </nb-card-header>

    <nb-card-body>
        <p-fieldset legend="Criterio de Busqueda de Usuarios">
            <div class="row row-cols-2 row-cols-lg-5 g-2 g-lg-3" style="padding: 10px;">
                <div class="col-sm-1" style="text-align: center;">
                    <label for="inputFirstName" class="label">Asignar Perfil</label>
                    <button nbTooltip="Asignar" nbTooltipPlacement="top" nbTooltipStatus="warning" pButton pRipple
                        (click)="op.toggle($event)" icon="pi pi-check-square"
                        class="p-button-rounded p-button-warning"></button>
                    <p-overlayPanel #op [showCloseIcon]="true" [style]="{width: '300px'}">
                        <ng-template pTemplate>
                            <p-dropdown appendTo="body" [options]="perfilesAsignar" [filter]="true"
                                placeholder="Asignar Perfil"></p-dropdown>
                        </ng-template>
                    </p-overlayPanel>
                </div>
                <div class="col">
                    <label for="inputFirstName" class="label">Usuario</label>
                    <input (input)="dt.filter($event.target.value, 'tipousuario', 'contains')" type="text" nbInput
                        fullWidth id="inputFirstName" placeholder="buscar por usuario">

                </div>
                <div class="col">
                    <label for="inputLastName" class="label">Persona</label>
                    <input (input)="dt.filter($event.target.value, 'Perfil', 'contains')" maxlength="200" type="text"
                        nbInput fullWidth id="inputLastName" placeholder="buscar por persona">

                </div>
                <div class="col">
                    <label for="inputLastName" class="label">Buscar por Perfil</label>
                    <p-dropdown appendTo="body" [options]="perfiles" [filter]="true"
                        (onChange)="dt.filter($event.value,'VaEstado', 'contains')" placeholder="Seleccionar Perfil">
                    </p-dropdown>

                </div>




            </div>






        </p-fieldset>
        <br>
        <p-fieldset legend="Perfil a Asignar">
            <div class="col-sm-4">
                <div class="form-group">
                    <label for="inputLastName" class="label">Perfil</label>
                    <p-dropdown appendTo="body" [options]="perfiles" [filter]="true"
                        (onChange)="dt.filter($event.value,'VaEstado', 'contains')" placeholder="Seleccionar Perfil">
                    </p-dropdown>
                </div>
            </div>

        </p-fieldset>
        <br>
        <p-fieldset legend="Resultados">

            <p-table #dt [value]="asignarPerfil" [rows]="15" [paginator]="true" [rowHover]="true" dataKey="tipousuario"
                [responsive]="true" [sortOrder]="-1" sortField="tipousuario"
                currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
                [showCurrentPageReport]="true">
                




                <ng-template pTemplate="header">
                    <tr>
                        
                        <th class="border-thread-left" pSortableColumn="tipousuario">Nro <p-sortIcon field="tipousuario"> </p-sortIcon>
                        </th>

                        <th pSortableColumn="Perfil">Usuario <p-sortIcon field="Perfil"></p-sortIcon>
                        </th>

                        <th pSortableColumn="VaEstado">Apellidos y Nombres <p-sortIcon field="VaEstado"></p-sortIcon>
                        </th>
                        <th pSortableColumn="VaEstado">Perfil <p-sortIcon field="VaEstado">
                            </p-sortIcon>
                        </th>
                        <th class="border-thread-right" >Seleccionar
                            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                            

                        </th>
                        

                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-asignarPerfil>
                    <tr>
                        
                        <td>{{asignarPerfil.tipousuario}}</td>

                        <td>{{asignarPerfil.Perfil}}</td>

                        <td>
                            <span>{{asignarPerfil.VaEstado}}</span>
                        </td>
                        <td>
                            <p-dropdown appendTo="body" [options]="perfilesAsignar" [filter]="true"
                                placeholder="Asignar Perfil"></p-dropdown>
                        </td>
                        <td>
                            <p-tableCheckbox [value]="asignarPerfil"></p-tableCheckbox>

                        </td>

                    </tr>
                </ng-template>
            </p-table>
        </p-fieldset>
    </nb-card-body>
</nb-card>

<p-confirmDialog [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '30vw'}"></p-confirmDialog>